<!-- 背景音乐播放器 -->
<div id="music-player" style="position: fixed; bottom: 20px; right: 20px; z-index: 1000; background: rgba(255, 255, 255, 0.9); border-radius: 10px; padding: 15px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
  <div style="display: flex; align-items: center; gap: 10px;">
    <button id="play-pause-btn" style="background: #4CAF50; color: white; border: none; border-radius: 50%; width: 40px; height: 40px; cursor: pointer; font-size: 18px;">▶</button>
    <div style="flex: 1; min-width: 200px;">
      <div style="font-size: 12px; color: #666;">正在播放</div>
      <div id="music-title" style="font-size: 14px; font-weight: bold; margin-top: 2px;">背景音乐</div>
      <input type="range" id="volume-control" min="0" max="100" value="50" style="width: 100%; margin-top: 5px;">
    </div>
    <button id="close-btn" style="background: none; border: none; font-size: 18px; cursor: pointer; color: #666;">×</button>
  </div>
  <audio id="background-music" loop preload="auto" volume="0.5">
    <!-- 支持多种音频格式，优先级从上到下 -->
    <!-- M4A 格式（推荐，体积小音质好） -->
    <source src="/music/background.m4a" type="audio/mp4">
    <!-- MP3 格式（浏览器兼容性最好） -->
    <source src="/music/background.mp3" type="audio/mpeg">
    <!-- OGG 格式（开源格式） -->
    <source src="/music/background.ogg" type="audio/ogg">
  </audio>
</div>

<script>
(function() {
  const player = document.getElementById('background-music');
  const playPauseBtn = document.getElementById('play-pause-btn');
  const volumeControl = document.getElementById('volume-control');
  const closeBtn = document.getElementById('close-btn');
  const musicPlayer = document.getElementById('music-player');
  
  let isPlaying = false;
  
  // 播放/暂停
  playPauseBtn.addEventListener('click', function() {
    if (isPlaying) {
      player.pause();
      playPauseBtn.innerHTML = '▶';
      isPlaying = false;
    } else {
      player.play();
      playPauseBtn.innerHTML = '⏸';
      isPlaying = true;
    }
  });
  
  // 音量控制
  volumeControl.addEventListener('input', function() {
    player.volume = this.value / 100;
  });
  
  // 关闭播放器
  closeBtn.addEventListener('click', function() {
    player.pause();
    musicPlayer.style.display = 'none';
  });
  
  // 页面加载时不自动播放（需要用户点击）
})();
</script>

<style>
@media (max-width: 768px) {
  #music-player {
    bottom: 10px !important;
    right: 10px !important;
    padding: 10px !important;
  }
}
</style>

